!function(n){function e(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return n[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}({0:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),a=t(257),u=i(a),s=t(703),c=i(s),d=function(){function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,n),this.host=e.host||"http://localhost:24752",this.tags=e.tags||[],this.user_id=e.user_id,this.auth_token=e.auth_token,this.last_time=0,this.beacon=new c["default"](this.host+"/drip"),u["default"].init({userTimingHandler:this.sendUserTiming.bind(this),eventHandler:this.sendTiming.bind(this),reportInterval:e.reportInterval})}return o(n,[{key:"addTags",value:function(){function n(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];this.tags.push(e)}return n}()},{key:"sendUserTiming",value:function(){function n(n){}return n}()},{key:"sendTiming",value:function(){function n(n){var e=new FormData;e.append("user_id",this.user_id),e.append("auth_token",this.auth_token),e.append("duration",n-this.last_time),e.append("date",(new Date).toISOString().substring(0,10)),this.tags.forEach(function(n){e.append("tags",n)}),this.beacon.send(e),this.last_time=n}return n}()}]),n}();e["default"]=new d({host:window.CCDATA.clepsydra.host,tags:window.CCDATA.clepsydra.tags,user_id:window.CCDATA.current_user._id,auth_token:window.CCDATA.current_user.authentication_token})},257:function(n,e,t){var i,r,o;/*!
	 * @preserve
	 * riveted.js | v0.6.1
	 * Copyright (c) 2016 Rob Flaherty (@robflaherty)
	 * Licensed under the MIT license
	 */
!function(t,a){r=[],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(n.exports=o))}(this,function(){var n=function(){function n(n){n=n||{},h=parseInt(n.reportInterval,10)||5,g=parseInt(n.idleTimeout,10)||30,k=n.gaGlobal||"ga","function"==typeof window[k]&&(y=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(m=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(_=!0),T="gaTracker"in n&&"string"==typeof n.gaTracker?n.gaTracker+".send":"send","function"==typeof n.eventHandler&&(v=n.eventHandler),"function"==typeof n.userTimingHandler&&(p=n.userTimingHandler),w=!("nonInteraction"in n)||n.nonInteraction!==!1&&"false"!==n.nonInteraction,t(document,"keydown",f),t(document,"click",f),t(window,"mousemove",e(f,500)),t(window,"scroll",e(f,500)),t(document,"visibilitychange",r),t(document,"webkitvisibilitychange",r)}function e(n,e){var t,i,r,o=null,a=0,u=function(){a=new Date,o=null,r=n.apply(t,i)};return function(){var s=new Date;a||(a=s);var c=e-(s-a);return t=this,i=arguments,c<=0?(clearTimeout(o),o=null,a=s,r=n.apply(t,i)):o||(o=setTimeout(u,c)),r}}function t(n,e,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function i(){clearTimeout(A),a()}function r(){(document.hidden||document.webkitHidden)&&i()}function o(){D+=1,D>0&&D%h===0&&v(D)}function a(){I=!0,clearInterval(H)}function u(){i(),C=!0}function s(){C=!1}function c(){I=!1,clearInterval(H),H=setInterval(o,1e3)}function d(){var n=new Date,e=n-R;b=!0,p(e),H=setInterval(o,1e3)}function l(){R=new Date,D=0,b=!1,I=!1,clearInterval(H),clearTimeout(A)}function f(){C||(b||d(),I&&c(),clearTimeout(A),A=setTimeout(i,1e3*g+100))}var v,p,h,g,w,y,m,T,_,k,b=!1,I=!1,C=!1,D=0,R=new Date,H=null,A=null;return p=function(n){_?dataLayer.push({event:"RivetedTiming",eventCategory:"Riveted",timingVar:"First Interaction",timingValue:n}):(y&&window[k](T,"timing","Riveted","First Interaction",n),m&&_gaq.push(["_trackTiming","Riveted","First Interaction",n,null,100]))},v=function(n){_?dataLayer.push({event:"Riveted",eventCategory:"Riveted",eventAction:"Time Spent",eventLabel:n,eventValue:h,eventNonInteraction:w}):(y&&window[k](T,"event","Riveted","Time Spent",n.toString(),h,{nonInteraction:w}),m&&_gaq.push(["_trackEvent","Riveted","Time Spent",n.toString(),h,w]))},{init:n,trigger:f,setIdle:i,on:s,off:u,reset:l}}();return n})},703:function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),r=function(){function n(e){var i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];t(this,n),this.useBeacon=!i&&window.navigator&&"function"==typeof window.navigator.sendBeacon,this.url=e}return i(n,[{key:"send",value:function(){function n(n){this.useBeacon?this.sendBeacon(n):this.sendXHR(n)}return n}()},{key:"sendBeacon",value:function(){function n(n){navigator.sendBeacon(this.url,n)}return n}()},{key:"sendXHR",value:function(){function n(n){var e=new window.XMLHttpRequest;e.open("POST",this.url,!0),!n instanceof FormData&&e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(n)}return n}()},{key:"url",set:function(){function n(n){this._url=n}return n}(),get:function(){function n(){return this._url}return n}()}]),n}();e["default"]=r}});
